---
title: SIGGRAPH 2021 | Video Recoloring via Spatial-Temporal Geometric Palettes
description: 通过时空几何调色板进行视频重新着色
date: 2025-11-08 11:10:30+0000
image: cover.jpg
categories:
    - 论文研读
tags:
    - Note
weight: 2045       # You can add weight to some posts to override the default sorting (date descending)
---

# Video Recoloring via Spatial-Temporal Geometric Palettes 论文研读总结

![image-20251109105918617](image-20251109105918617.png)

- **文献来源**：SIGGRAPH 2021（清华大学）
- **论文标题**：Video Recoloring via Spatial-Temporal Geometric Palettes
- **中文翻译：**通过时空几何调色板进行视频重新着色

------

## 摘要

传统基于调色板的图像重着色方法使用静态调色板，无法有效处理视频中随时间变化的颜色。本文提出一种创新的**时空几何调色板方法**，通过构建4D倾斜多胞形（颜色+时间维度）隐式定义时变调色板，实现自然、无伪影的视频重着色。

## **核心贡献**：

- 扩展调色板框架至视频场景
- 引入4D几何调色板概念
- 自然处理颜色合并/分裂的拓扑变化
- 提供直观的编辑界面支持关键帧动画

------

## 工作流程

![image-20251109110020547](image-20251109110020547.png)

1. **初始化**：逐帧生成RGB凸包，粘合相邻帧形成初始4D倾斜多胞形
2. **块合并**：按拓扑一致性分块并合并，减少冗余
3. **顶点移除**：迭代移除冗余顶点至损失阈值（η₂=3）
4. **顶点优化**：微调顶点位置，优化重构精度与时间平滑性

------

## 关键技术细节

### 1. 数学模型基础

#### **加性混合权重公式**：

```
p = Σ wᵢvᵢ  (∀像素p ∈ 图像I)
```

- 像素颜色可表示为调色板颜色的加权组合

#### **损失函数**：

- **重建误差**：像素到调色板凸包的平均距离`R(V,I) = (1/|I|) Σ ||p - proj(p)||`
- **紧凑性损失**：调色板颜色与邻近颜色的差异`C(V,I) = (1/|V|) Σ ||v - vₙ||`
- **总损失**：`L(V,I) = λR(V,I) + C(V,I)`

#### **生成一个“好”的调色板需要满足的数学目标和约束：**

**三个理想属性：**

* 顶点数量少：便于用户编辑。
* 重建精度高：即重建误差R(V,I)（公式2）要小，表示用调色板重建的图像与原图差异小。
* 调色板紧凑：即紧凑性损失C(V,I)（公式3）要小，表示调色板中的每个颜色都与图像中的真实像素颜色非常接近，这样调色板更具代表性，用户控制更直接。

![image-20251109112409910](image-20251109112409910.png)

**四个约束条件：**

* 帧间度规则1：每个顶点的帧间度必须≥1。不允许为零。
* 帧间度规则2：对于每条帧间边，其两个顶点中最多只能有一个的帧间度≥2。
* 拓扑规则1：若一个顶点有多个帧间边，则它连接到的目标顶点之间必须已经存在一条帧内边。
* 拓扑规则2：对于一条帧内边，其两个端点分别连接到的目标顶点必须是同一个顶点，或者它们之间也必须存在一条帧内边。我们在满足上述条件的前提下，寻找一组能最小化色彩差异的帧间边集合E。

### 2. 4D几何调色板定义

<img src="../../../../../博客笔记/image-20251109111056939.png" alt="如图示，切片非斜多面体得7顶点多边形，而切片斜多面体得4顶点多边形。顶点越少，越易于可视化和控制。" style="zoom:50%;" />

- 将视频像素投影至**RGBT空间**（RGB颜色+时间维度）
- 时变调色板通过4D多胞形的时间切片隐式定义
- 引入**帧间度规则**与**拓扑规则**确保顶点对应关系清晰

### 3. 核心算法步骤

#### （1）块合并

- 将视频分段为拓扑一致的"块"
- 合并相邻块至损失增长超过η₁=3.5倍时停止
- 平衡拓扑复杂度与控制便利性

#### （2）顶点移除

![img](https://hunyuan-plugin-private-1258344706.cos.ap-nanjing.myqcloud.com/pdf_youtu/img/eb2a7f19500a440f8a2031d79b6daea7-image.png?q-sign-algorithm=sha1&q-ak=AKID372nLgqocp7HZjfQzNcyGOMTN3Xp6FEA&q-sign-time=1762657042%3B2078017042&q-key-time=1762657042%3B2078017042&q-header-list=host&q-url-param-list=&q-signature=17e35f7ed1863fd51677f2e193cd5be321b52f81)

- 用"幽灵顶点"替代冗余顶点
- 保留分裂/合并顶点及边界顶点以保护拓扑结构

#### （3）顶点优化

- 引入平滑项惩罚颜色突变：`K(P) = (1/|E|) Σ |(uRGB - vRGB)/(ut - vt)|`
- 总损失函数：`Lᵥ' = Lᵥ + γK(P)`
- 通过非线性优化微调顶点位置

------

## 实验与分析

### 1. 参数调优

![image-20251109111316339](image-20251109111316339.png)

![image-20251109111327635](image-20251109111327635.png)

![image-20251109111424211](image-20251109111424211.png)

| 参数 | 最优值 | 作用                   |
| :--- | :----- | :--------------------- |
| α    | 10     | 控制块合并的拓扑复杂度 |
| η₁   | 3.5    | 块合并的损失阈值       |
| β    | 1.0    | 影响顶点数量平衡       |
| η₂   | 3.0    | 顶点移除的损失阈值     |

### 2. 对比实验

| 对比方法   | 缺陷                       | 本方法优势               |
| :--------- | :------------------------- | :----------------------- |
| RGB凸包法  | 静态调色板无法处理时变颜色 | 动态调色板适应颜色变化   |
| 聚类法     | 缺乏时间维度精确控制       | 提供时间连贯的顶点对应   |
| RGBT凸包法 | 调色板过于复杂难解释       | 紧凑且易于解释的几何结构 |

**量化结果**：本方法紧凑性损失（0.036）显著优于对比方法（0.0649/0.2635）

------

## 用户界面与反馈

![image-20251109111630948](image-20251109111630948.png)

- **界面特性**：时间轴视图+颜色选择器，支持关键帧编辑
- **用户研究**（16人含专业调色师）：100%对UI满意87.5%认为调色板准确反映颜色分布93.5%认为结果符合预期

------

## 总结

本方法通过**4D时空几何调色板**解决了视频重着色的核心挑战：

1. **动态性**：适应颜色随时间变化
2. **紧凑性**：顶点数少且代表性强
3. **直观性**：提供拓扑一致的编辑接口
4. **自然度**：平滑处理颜色合并/分裂的拓扑变化

**应用前景**：影视调色、视频滤镜、动态视觉效果制作等领域具有重要应用价值。